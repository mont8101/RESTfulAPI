<!DOCTYPE html>
<html>
<head>
<meta charset=utf-8 />
<title>Ben and Scott super cool map</title>
<meta name='viewport' content='initial-scale=1,maximum-scale=1,user-scalable=no' />

<link rel="stylesheet" href="functional.css">

<script type="application/javascript" src="https://cdn.jsdelivr.net/npm/vue"></script>

<script src='https://api.mapbox.com/mapbox.js/v3.2.1/mapbox.js'></script>

<link href='https://api.mapbox.com/mapbox.js/v3.2.1/mapbox.css' rel='stylesheet' />

<script type="application/javascript" src="functional_search.js"></script>

</head>
<body onload="Init()">
<div id='map'></div>


<div id="search_bar">
        <form>
            <select name = "dropdown">
                <option value = "address" selected>Address</option>
                <option value = "coordinates">Coordinates</option>
            </select>
        </form>
    <input type="text" v-model="address" placeholder="Enter Address" />
    <button type="button" @click="Submit">Search</button>
</div>

<div>
    <table v-if="search_results.length > 0">
        <thead>
            <tr>
                <th> Case Number </th>
                <th> Date  </th>
                <th> Time </th>
                <th> Code </th>
                <th> Incident </th>
                <th> Police Grid </th>
                <th> Neighborhood Numberer </th>
                <th> Block </th>
            </tr>
        </thead>
        <tbody>
            <tr v-for="item in search_results">
                <td></td>
                <td>{{ item.name }}</td>
                <td>{{ item.genres }}</td>
                <td>{{ item.popularity }}</td>
                <td></td>
                <td></td>
                <td></td>
            </tr>
        </tbody>
    </table>
</div>

<script>
L.mapbox.accessToken = 'pk.eyJ1IjoibW9udDgxMDEiLCJhIjoiY2s0MWR4cG9lMDBjaTNtcnVmMG1sNzV0aSJ9.0rDexyaVqDy0hHXnARrWLg';

var northWest = L.latLng(44.993385, -93.211626),
    southEast = L.latLng(44.888645, -93.001340),
    bounds = L.latLngBounds(northWest, southEast);

var map = L.mapbox.map('map', null, {
    maxBounds: bounds,
    minZoom: 13,
    maxZoom: 18,
})
  .setView([44.953310, -93.091463], 13)
  .addLayer(L.mapbox.styleLayer('mapbox://styles/mapbox/streets-v11'));

// zoom the map to that bounding box
map.fitBounds(bounds);
</script>
</body>
</html>